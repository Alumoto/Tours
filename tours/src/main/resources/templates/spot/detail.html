<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Spot detail</title>
    <div th:replace="common::head-com()"></div>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" />

<body>
    <div th:replace="common::nav-bar()"></div>
    <h1>Spot detail</h1>
    <div id="map"></div>

    <form th:action="@{update}" th:object="${spotForm}" method="post">
        <dl>

            <dt><label for="spotName">名前:</label></dt>
            <dd><input type="text" name="spotName" id="spotName" th:field="*{spotName}" th:errorclass="error_input" value="a"></dd>
            <!-- <span th:if="${#fields.haserrors('spotName')}" th:errors="*{spotName}" class="error-messages">error!</span>
            -->
            <a class="btn btn-primary" th:href="@{content/add(spotId=${param.spotId[0]})}">コンテンツ追加</a>
            
            <input type="hidden" name="spotId" th:value="${param.spotId[0]}" />
            <input type="hidden" name="tourId" th:value="${param.tourId[0]}" />
            <input class="btn btn-primary" type="submit" value="更新" /></input>
        </dl>
    </form> 
    

    <hr/>

    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
    <script type="text/javascript" th:src="@{/js/spotdetail.js}"></script>
        <script type="text/javascript" th:inline="javascript">
    $(function(){
        /*<![CDATA[*/
        var lng = /*[[${spotForm.spotLng}]]*/ '100';
        var lat = /*[[${spotForm.spotLat}]]*/ '100';
        var name = /*[[${spotForm.spotName}]]*/ 'test'
        /*]]>*/

        mymap.setView([lat, lng], 17);
    });
    </script>
</body>

</html>